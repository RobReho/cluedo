<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>exprolab: cluedo_sm Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">exprolab
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Experimental Robotics Lab _ Assignment 1</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cluedo_sm Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_armor__communication.html">Armor_communication</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_deliver__hypothesis.html">Deliver_hypothesis</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_explore.html">Explore</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_hypothesis__check.html">Hypothesis_check</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_initialization.html">Initialization</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_make__hypothesis.html">Make_hypothesis</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluedo__sm_1_1_reach__oracle.html">Reach_oracle</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2e7c49af5eb1b7f8751d90ca89e2521"><td class="memItemLeft" align="right" valign="top"><a id="af2e7c49af5eb1b7f8751d90ca89e2521"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>ui_message</b> (message)</td></tr>
<tr class="separator:af2e7c49af5eb1b7f8751d90ca89e2521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbc1f520e821ff1a8342de513efb21ed"><td class="memItemLeft" align="right" valign="top"><a id="adbc1f520e821ff1a8342de513efb21ed"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> ()</td></tr>
<tr class="separator:adbc1f520e821ff1a8342de513efb21ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab47ab0f6c84f449456e21f783c57e188"><td class="memItemLeft" align="right" valign="top"><a id="ab47ab0f6c84f449456e21f783c57e188"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>people_list</b> = []</td></tr>
<tr class="separator:ab47ab0f6c84f449456e21f783c57e188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb3e1685ae5e18b9ee4a8f9a8ba1c29"><td class="memItemLeft" align="right" valign="top"><a id="afbb3e1685ae5e18b9ee4a8f9a8ba1c29"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>weapons_list</b> = []</td></tr>
<tr class="separator:afbb3e1685ae5e18b9ee4a8f9a8ba1c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a772f3db6a9f6e4cb52869813a3fee376"><td class="memItemLeft" align="right" valign="top"><a id="a772f3db6a9f6e4cb52869813a3fee376"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>places_list</b> = []</td></tr>
<tr class="separator:a772f3db6a9f6e4cb52869813a3fee376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca12666260098934dad99ac3e45e432e"><td class="memItemLeft" align="right" valign="top"><a id="aca12666260098934dad99ac3e45e432e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>srv_client_final_hypothesis_</b> = rospy.ServiceProxy('/verify_solution', Compare)</td></tr>
<tr class="separator:aca12666260098934dad99ac3e45e432e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef10ace17d3f33dff9829ca164612ecf"><td class="memItemLeft" align="right" valign="top"><a id="aef10ace17d3f33dff9829ca164612ecf"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>srv_client_generate_murder_</b> = rospy.ServiceProxy('/generate_murder', Hypothesis)</td></tr>
<tr class="separator:aef10ace17d3f33dff9829ca164612ecf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e435cc3a84a68842507f567047971a"><td class="memItemLeft" align="right" valign="top"><a id="aa7e435cc3a84a68842507f567047971a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>srv_client_get_hint_</b> = rospy.ServiceProxy('/get_hint', Hints)</td></tr>
<tr class="separator:aa7e435cc3a84a68842507f567047971a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7964499965af53d7cd6f775c0d959e"><td class="memItemLeft" align="right" valign="top"><a id="ade7964499965af53d7cd6f775c0d959e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ui</b> = rospy.Publisher('ui_output', String, queue_size=30)</td></tr>
<tr class="separator:ade7964499965af53d7cd6f775c0d959e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf6c4470eb33b636df22b6c280859d3"><td class="memItemLeft" align="right" valign="top"><a id="afdf6c4470eb33b636df22b6c280859d3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>n_hyp</b> = 0</td></tr>
<tr class="separator:afdf6c4470eb33b636df22b6c280859d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9afbdbd20dae05b99f4749ba8ac611"><td class="memItemLeft" align="right" valign="top"><a id="aca9afbdbd20dae05b99f4749ba8ac611"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>armor</b> = <a class="el" href="classcluedo__sm_1_1_armor__communication.html">Armor_communication</a>()</td></tr>
<tr class="separator:aca9afbdbd20dae05b99f4749ba8ac611"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">@package cluedo state machine
This node handles the states of the FSM
The states are implemented in the "cluedo_state_machine" node.
- The INIT state Establish the communication with Armor server, loads OWL file, calls "generate murder" service to start the game, retrieves people, weapons and places list from the OWL 
- The EXPLORE state retrieves the list of available places, randomly choose one and simulates reaching the place by sleeping 1 second.
- THe MAKE HYPOTHESIS state asks the server to get a new hint, it loads it on the ontology and retrieves the classes "COMPLETE" and "INCONISTENT" to check for consistency. If the hypothesis is consistent the executed state is REACH ORACLE, otherwise it will go back to the state EXPLORE.
- The state REACH ORACLE just simulates reaching the oracle posistion by sleeping 1 second. The possibility that this state fails is implemented in the state machine, but never executed. The possibility is left for future implementations where an actual sction will be implemented. Onche the oracle is reached, the next executed state is DELIVER HYPOTHESIS.
- The DELIVER HYPOTHESIS state gets the person, weapon and place of the hypothesis and express it in natural language. The next state is HYPOTHESIS CHECK
- The state HYPOTHESIS CHECK calls the server "verify solution" to compare the hypothesis with the right one. If all the booleans returned are true the game ends, otherwise the hypothesis is wrong and the program executes the state EXPLORE.

The nodes communicate with some customized services:
- "/verify_solution" of type Compare
- '/generate_murder' of type Hypothesis
- '/get_hint' of type Hints</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
